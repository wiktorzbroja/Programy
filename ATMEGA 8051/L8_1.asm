LJMP INIT

ORG 001BH
LJMP KLAWKA

ORG 50H
INIT:
MOV TMOD,#00010000B
MOV TCON,#01000000B
MOV IE,#10001000B
MOV TL1,#00H
MOV TH1,#00H
MOV P1, #0FFH
MOV P2, #0FFH
LJMP START

ORG 100H
START:
INC R5
LJMP START

ORG 200H
KLAWKA:
MOV P1, #11111110B; KOLUMNA 1
MOV A, P2
CJNE A,#11111111B, KOL1

MOV P1, #11111101B;KOLUMNA 2
MOV A, P2
CJNE A,#11111111B, KOL2 

MOV P1, #11111011B;KOLUMNA 3
MOV A, P2
CJNE A,#11111111B, KOL3 

MOV P1, #11110111B;KOLUMNA 4
MOV A, P2
CJNE A,#11111111B, KOL4 

RETI

KOL1:
MOV 40H,A
RETI
KOL2:
MOV 41H,A
RETI
KOL3:
MOV 42H,A
RETI
KOL4:
MOV 43H,A
RETI
END